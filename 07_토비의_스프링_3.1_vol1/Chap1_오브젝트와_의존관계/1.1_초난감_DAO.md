ìŠ¤í”„ë§ì˜ í•µì‹¬ ê´€ì‹¬ì‚¬ â‡’ ì˜¤ë¸Œì íŠ¸

ê°ì²´ì§€í–¥ ì„¤ê³„ì„ ìœ„í•œ ê¸°ì´ˆì™€ ì›ì¹™

- ë””ìì¸íŒ¨í„´ : ë‹¤ì–‘í•œ ëª©ì ì„ ìœ„í•œ ì¬í™œìš©
- ë¦¬íŒ©í† ë§ : í´ë¦° ì½”ë“œë¥¼ ìœ„í•œ ê°œì„ 
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ : ì˜¤ë¸Œì íŠ¸ê°€ ê¸°ëŒ€í•œ ëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ ê²€ì¦

**â­ï¸ ì˜¤ë¸Œì íŠ¸ì˜ ì„¤ê³„ì™€ êµ¬í˜„, ë™ì‘ì›ë¦¬**

# 1.1 ì´ˆë‚œê° DAO

DAO (Data Access Object) : DBë¥¼ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê±°ë‚˜ ì¡°ì‘í•˜ëŠ” ê¸°ëŠ¥ì„ ì „ë‹´í•˜ë„ë¡ ë§Œë“  *ì˜¤ë¸Œì íŠ¸*

[ì˜¤ë¸Œì íŠ¸ë€](https://www.notion.so/eb283181145e42b28a2c0f69f61424a8)

## 1.1.1 User

- ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥í•˜ë©° ìë°”ë¹ˆ ê·œì•½ì— ë”°ë¥´ëŠ” ì˜¤ë¸Œì íŠ¸
- class ìƒì„±

    ```java
    public class User {
    	String id;
    	String name;
    	String password;
    	
    	public String getId(){
    		return id;
    	}
    	public String setId(String id){
    		this.id = id;
    	}
    	public String getName(){
    		return name;
    	}
    	public String setName(String name){
    		this.name = name;
    	}
    	public String getPassword(){
    		return password;
    	}
    	public String setPassword(String password){
    		this.password = password;
    	}
    }
    ```

- table ìƒì„±

    ```java
    create table users (
    	id varchar(20) primary key,
    	name varchar(20) not null,
    	password varchar(20) not null
    );
    ```


> **ìë°”ë¹ˆ(JavaBean), ë¹ˆ(Bean)**
: ë¹„ì£¼ì–¼ íˆ´ì—ì„œ ì¡°ì‘ ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸
: ì§€ê¸ˆì€ ì›¹ ê¸°ë°˜ ì—”í„°í”„ë¼ì´ì¦ˆ ë°©ì‹ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆì§€ë§Œ, ì½”ë”© ê´€ë¡€ëŠ” ì§€ê¸ˆë„ ì´ì–´ì§€ê³  ìˆìŒ (JSP ë¹ˆ, EJB ë“±ë“±)

ì•„ë˜ ë‘ ê´€ê³„ë¥¼ ë”°ë¼ ë§Œë“¤ì–´ì§„ *ì˜¤ë¸Œì íŠ¸*ë¥¼ ê°€ë¦¬í‚´
- ë””í´íŠ¸ ìƒì„±ì : ìë°”ë¹ˆì€ íŒŒë¼ë¯¸í„°ê°€ ì—†ëŠ” ë””í´íŠ¸ ìƒì„±ìë¥¼ ê°€ì ¸ì•¼í•¨ (íˆ´ì´ë‚˜ í”„ë ˆì„ì›Œí¬ì—ì„œ ë¦¬í”Œë ‰ì…˜ì„ ì´ìš©í•´ ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•¨)
- í”„ë¡œí¼í‹° : ìë°”ë¹ˆì´ ë…¸ì¶œí•˜ëŠ” ì´ë¦„ì„ ê°€ì§„ ì†ì„±. getterì™€ setter ë©”ì†Œë“œë¥¼ í†µí•´ ìˆ˜ì • ë˜ëŠ” ì¡°íšŒ ê°€ëŠ¥


## 1.1.2 UserDao

ì‚¬ìš©ì ì •ë³´ë¥¼ DBì— ë„£ê³  ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ìƒì„±í•  ê²ƒ

getterì™€ setterë¥¼ ìƒì„±í•˜ê² ë‹¤.

- JDBCë¥¼ ì´ìš©í•œ ì¼ë°˜ì ì¸ ìˆœì„œ
    - DBì—°ê²°ì„ ìœ„í•œ Connectionì„ ê°€ì ¸ì˜´
    - SQLì„ ë‹´ì€ Statement(ë˜ëŠ” PreparedStatement)ë¥¼ ë§Œë“ ë‹¤
    - ë§Œë“¤ì–´ì§„ Statementë¥¼ ì‹¤í–‰í•¨
    - ì¡°íšŒì˜ ê²½ìš° SQLê²°ê³¼ë¥¼ ResultSetìœ¼ë¡œ ë°›ì•„ ì €ì¥í•  ì˜¤ë¸Œì íŠ¸ì— ì˜®ê¹€
    - ì¤‘ê°„ì— ìƒì„±ëœ Connection, Statement, ResultSetê°™ì€ ë¦¬ì†ŒìŠ¤ëŠ” ì¢…ë£Œí›„ ê¼­ ë‹«ì•„ì¤Œ
    - JDBC APIê°€ ë§Œë“¤ì–´ë‚´ëŠ” ì˜ˆì™¸ë¥¼ ì§ì ‘ ì²˜ë¦¬í•˜ê±°ë‚˜ ë©”ì†Œë“œì— throws ì„ ì–¸
- JDBCë¥¼ ì´ìš©í•œ ë“±ë¡ê³¼ ì¡°íšŒ ê¸°ëŠ¥ì´ ìˆëŠ” UserDao í´ë˜ìŠ¤ (ë”ì°í•´ì„œ ë³„ë¡œ ë³´ê³ ì‹¶ì§€ ì•ŠìŒğŸ¤®)

    ```java
    package user.dao;
    
    import org.springframework.dao.EmptyResultDataAccessException;
    import user.domain.User;
    
    import javax.sql.DataSource;
    import java.sql.Connection;
    import java.sql.PreparedStatement;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    
    public class UserDao {
        private DataSource dataSource;
    
        public void setDataSource(DataSource dataSource) {
            this.dataSource = dataSource;
        }
    
        public void add(User user) throws SQLException {
    				Class.forName("com.mysql.jdbc.Driver");
            Connection c = DriverManager.getConnection("jdbc://musql://localhost/springbook", "spring", "book");
    
            PreparedStatement ps = c.prepareStatement(
                "insert into users(id, name, password) values(?,?,?)");
            ps.setString(1, user.getId());
            ps.setString(2, user.getName());
            ps.setString(3, user.getPassword());
    
            ps.executeUpdate();
    
            ps.close();
            c.close();
        }
    
        public User get(String id) throws SQLException {
            Class.forName("com.mysql.jdbc.Driver");
            Connection c = DriverManager.getConnection("jdbc://musql://localhost/springbook", "spring", "book");
    
            PreparedStatement ps = c
                .prepareStatement("select * from users where id = ?");
            ps.setString(1, id);
    
            ResultSet rs = ps.executeQuery();
    				rs.next();
            User user = new User();
            user.setId(rs.getString("id"));
            user.setName(rs.getString("name"));
            user.setPassword(rs.getString("password"));
    
            rs.close();
            ps.close();
            c.close();
    
            return user;
        }
    }
    ```


- í´ë˜ìŠ¤ ë™ì‘ ì—¬ë¶€ í™•ì¸ì„ ìœ„í•´ì„œëŠ”
    - ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ì–´ ì„œë²„ì— ë°°ì¹˜
    - ì›¹ ë¸Œë¼ìš°ì €ë¥¼ í†µí•´ DAOì˜ ê¸°ëŠ¥ ì‚¬ìš©

  â†’ ê°„ë‹¨í•˜ê²Œ ì‘ë™ì—¬ë¶€ í™•ì¸ì„ ìœ„í•¨ì´ë¼ë©´ ë„ˆë¬´ ë³µì¡í•˜ë‹¤


## 1.1.3 main()ì„ ì´ìš©í•œ DAO í…ŒìŠ¤íŠ¸ ì½”ë“œ

- ì˜¤ë¸Œì íŠ¸ ìŠ¤ìŠ¤ë¡œ ìì‹ ì„ ê²€ì¦í•˜ë„ë¡ í•´ì£¼ëŠ”ê²Œ ê°€ì¥ ê°„ë‹¨í•¨
- ìŠ¤íƒœí‹± ë©”ì†Œë“œ main()

[ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸](https://www.notion.so/6b51f7282beb43a69e8a3386f7e0bd33)

- main()ì„ ì´ìš©í•œ add()ì™€ get() ê²€ì¦

    ```java
    public static void main(String[] args) throws ClassNotFoundException, SQLException{
    	UserDao dao = new UserDao();
    
    	User user = new User();
    	user.setId("whiteship");
    	user.setName("ë°±ê¸°ì„ ");
    	user.setPassword("married");
    	
    	dao.add(user);
    	
    	System.out.println(user.getId() + "ë“±ë¡ì„±ê³µ");
    	
    	User user2 = dao.get(user.getId());
    
    	System.out.println(user2.getName());
    	System.out.println(user2.getPassword());
    	System.out.println(user2.getId() + "ë“±ë¡ì„±ê³µ");
    }
    ```


â‡’ ê·¼ë° ì´ë ‡ê²Œ í•˜ë©´ ìš•ë¨¹ì–´ìš”
