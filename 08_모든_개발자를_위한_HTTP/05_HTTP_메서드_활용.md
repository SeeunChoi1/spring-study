# HTTP λ©”μ„λ“ ν™μ©

## ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅ λ°μ΄ν„° μ „μ†΅

### λ°μ΄ν„°λ¥Ό μ „λ‹¬ ν•λ” λ°©μ‹μ€ ν¬κ² 2κ°€μ§€

1. μΏΌλ¦¬ νλΌλ―Έν„°λ¥Ό ν†µν• λ°μ΄ν„° μ „μ†΅
    1. GET
    2. μ£Όλ΅ μ •λ ¬ ν•„ν„°(κ²€μƒ‰μ–΄)
2. λ©”μ‹μ§€ λ°”λ””λ¥Ό ν†µν• λ°μ΄ν„° μ „μ†΅
    1. POST, PUT, PATCH
    2. νμ›κ°€μ…, μƒν’μ£Όλ¬Έ, λ¦¬μ†μ¤ λ“±λ΅, λ¦¬μ†μ¤ λ³€κ²½

### ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅ λ°μ΄ν„° μ „μ†΅ν•λ” 4κ°€μ§€ μƒν™©

1. μ •μ  λ°μ΄ν„° μ΅°ν
    - μ΅°νλ” GET μ‚¬μ©
    - μ •μ  λ°μ΄ν„°λ” μΌλ°μ μΌλ΅ μΏΌλ¦¬ νλΌλ―Έν„° μ—†μ΄ λ¦¬μ†μ¤ κ²½λ΅λ΅ λ‹¨μν•κ² μ΅°ν κ°€λ¥
2. λ™μ  λ°μ΄ν„° μ΅°ν

   ![Untitled](./img/Lecture05/Untitled.png)

    - μ΅°νλ” GET μ‚¬μ© (μΏΌλ¦¬ νλΌλ―Έν„°λ¥Ό ν†µν•΄ λ°μ΄ν„° μ „λ‹¬)
    - μ£Όλ΅ κ²€μƒ‰, κ²μ‹ν λ©λ΅μ—μ„ μ •λ ¬ ν•„ν„° (κ²€μƒ‰μ–΄)
    - μ΅°ν μ΅°κ±΄μ„ μ¤„μ—¬μ£Όλ” ν•„ν„°, μ΅°ν κ²°κ³Όλ¥Ό μ •λ ¬ν•λ” μ •λ ¬ μ΅°κ±΄μ— μ£Όλ΅ μ‚¬μ©
3. HTML Formμ„ ν†µν• λ°μ΄ν„° μ „μ†΅

   > π’΅HTML Form μ „μ†΅μ€ `GET`, `POST`λ§ μ§€μ›
   >
    1. POST μ „μ†΅ - μ €μ¥

       ![Untitled](./img/Lecture05/Untitled%201.png)

        - `Content-Type: application/x-www-formβ€”urlencoded`
            - formμ λ‚΄μ©μ„ λ©”μ‹μ§€μ λ°”λ””λ¥Ό ν†µν•΄μ„ μ „μ†΅ (key=value, μΏΌλ¦¬ νλΌλ―Έν„° ν•μ‹)
            - μ „μ†΅ λ°μ΄ν„°λ¥Ό url encoding μ²λ¦¬
    2. GET μ „μ†΅ - μ €μ¥

       ![Untitled](./img/Lecture05/Untitled%202.png)

    3. multipart/form-data

       ![Untitled](./img/Lecture05/Untitled%203.png)

        - `Content-Type: multipart/form-data`
            - μ£Όλ΅ νμΌ μ—…λ΅λ“ κ°™μ€ λ°”μ΄λ„λ¦¬ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•  λ• μ‚¬μ©
        - λ‹¤λ¥Έ μΆ…λ¥μ μ—¬λ¬ νμΌκ³Ό νΌμ λ‚΄μ©μ„ ν•¨κ» μ „μ†΅ κ°€λ¥ (κ·Έλμ„ μ΄λ¦„μ΄ multipart)
4. HTTP APIλ¥Ό ν†µν• λ°μ΄ν„° μ „μ†΅

   ![Untitled](./img/Lecture05/Untitled%204.png)

    - μ„λ²„λΌλ¦¬ ν†µμ‹ ν•  λ• λ§μ΄ μ‚¬μ©
    - μ›Ή ν΄λΌμ΄μ–ΈνΈ
        - HTMLμ—μ„ Form μ „μ†΅ λ€μ‹  μλ°”μ¤ν¬λ¦½νΈλ¥Ό ν†µν•΄ ν†µμ‹ μ— μ‚¬μ© (AJAX)
    - `POST`, `PUT`, `PATCH` : λ©”μ‹μ§€ λ°”λ””λ¥Ό ν†µν•΄ λ°μ΄ν„° μ „μ†΅
    - `GET` : μ΅°ν, μΏΌλ¦¬ νλΌλ―Έν„°λ΅ λ°μ΄ν„° μ „λ‹¬
    - `Content-Type: application/json`μ„ μ£Όλ΅ μ‚¬μ© (μ‚¬μ‹¤μƒ ν‘μ¤€)

## HTTP API μ„¤κ³„ μμ‹

### HTTP API - μ»¬λ ‰μ… (POST κΈ°λ° λ“±λ΅)

- λ¦¬μ†μ¤λ¥Ό μ‹λ³„ν•΄μ•Όμ§€ λ‹¤λ¥Έκ±Έ μ‹λ³„ν•λ©΄ μ•λλ‹¤

```
νμ› λ©λ΅ μ΅°ν /members β†’ GET
νμ› μ΅°ν `/members/{id}` β†’ GET
νμ› λ“±λ΅ `/members/{id}` β†’ POST
νμ› μμ • `/members/{id}` β†’ PATCH, PUT, POST
νμ› μ‚­μ  `/members/{id}` β†’ DELETE
```

- **ν΄λΌμ΄μ–ΈνΈλ” λ“±λ΅λ  λ¦¬μ†μ¤μ URIλ¥Ό λ¨λ¥Έλ‹¤**
    - POST `/members`
- POSTμ—μ„λ” μ‹ κ· λ“±λ΅ν• λ‹¤μμ— μ„λ²„κ°€ μƒλ΅ λ“±λ΅λ λ¦¬μ†μ¤ URIλ¥Ό μƒμ„±ν•΄μ¤€λ‹¤
    - `Location: /members/100`
- μ»¬λ ‰μ…(Collection)
    - μ„λ²„κ°€ κ΄€λ¦¬ν•λ” λ¦¬μ†μ¤ λ””λ ‰ν† λ¦¬
    - μ„λ²„κ°€ λ¦¬μ†μ¤μ URIλ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬
    - μ—¬κΈ°μ„ μ»¬λ ‰μ…μ€ `/members`

### HTTP API - μ¤ν† μ–΄ (PUT κΈ°λ° λ“±λ΅)

```
νμΌ λ©λ΅ /files β†’ GET
νμΌ μ΅°ν `/files/{filename}` β†’ GET
νμΌ λ“±λ΅ `/files/{filename}` β†’ PUT
νμΌ μ‚­μ  `/files/{filename}` β†’ DELETE
νμΌ λ€λ‰ λ“±λ΅ `/files` β†’ POST
```

- POSTμ μλ―Έλ¥Ό μƒλ΅ μ§€μ •ν•΄λ„ λ¨
- ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤μ URIλ¥Ό μ•κ³ μμ–΄μ•Όν•¨
    - PUT `files/star.jpg`
- ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘ λ¦¬μ†μ¤μ URIλ¥Ό μ§€μ •ν•¨
- μ¤ν† μ–΄(Store)
    - ν΄λΌμ΄μ–ΈνΈκ°€ κ΄€λ¦¬ν•λ” λ¦¬μ†μ¤ μ €μ¥μ†
    - ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤μ URIλ¥Ό μ•κ³  κ΄€λ¦¬
    - μ—¬κΈ°μ„ μ¤ν† μ–΄λ” `/files`

> π’΅**POST vs PUT**  
> POST - μ„λ²„κ°€ λ¦¬μ†μ¤ μ•μ•„μ„ λ§λ“¦ ν΄λΌμ΄μ–ΈνΈλ” λ¨λ¦„  
> PUT - λ¦¬μ†μ¤ URIλ¥Ό μ•κ³  λ“±λ΅ν•΄μ„ ν΄λΌμ΄μ–ΈνΈκ°€ μ•κ³  URIλ¥Ό μ§μ ‘ κ΄€λ¦¬ν•¨
>

### HTML FORM μ‚¬μ© (GET, POSTλ§ μ§€μ›)

- HTML FORMμ€ GET, POSTλ§ μ§€μ›
    - μ μ•½μ΄ μμ
- AJAX κ°™μ€ κΈ°μ μ„ μ‚¬μ©ν•΄μ„ ν•΄κ²° κ°€λ¥

```
νμ› λ©λ΅ /members -> **GET**
νμ› λ“±λ΅ νΌ /members/new -> **GET**
νμ› λ“±λ΅ /members/new, /members -> **POST**
νμ› μ΅°ν /members/{id} -> **GET**
νμ› μμ • νΌ /members/{id}/edit -> **GET**
νμ› μμ • /members/{id}/edit, /members/{id} -> **POST**
νμ› μ‚­μ  /members/{id}/delete -> **POST**
```

- μ»¨νΈλ΅¤ URI
    - GET, POSTλ§ μ§€μ›ν•λ―€λ΅ μ μ•½μ΄ μμ
    - μ΄λ° μ μ•½μ„ ν•΄κ²°ν•κΈ° μ„ν•΄ λ™μ‚¬λ΅ λ λ¦¬μ†μ¤ κ²½λ΅ μ‚¬μ©
    - POSTμ /new, /edit, /deleteκ°€ μ»¨νΈλ΅¤ URI
    - HTTP λ©”μ„λ“λ΅ ν•΄κ²°ν•κΈ° μ• λ§¤ν• κ²½μ° μ‚¬μ© (HTTP API ν¬ν•¨)

### μ°Έκ³ ν•λ©΄ μΆ‹μ€ URI μ„¤κ³„ κ°λ…

- λ¬Έμ„ (document)
    - λ‹¨μΌ κ°λ…(νμΌ ν•λ‚, κ°μ²΄ μΈμ¤ν„΄μ¤, λ°μ΄ν„°λ² μ΄μ¤ row)
    - ex) `/members/100`, `/files/star.jpg`
- μ»¬λ ‰μ… (collection)
    - μ„λ²„κ°€ κ΄€λ¦¬ν•λ” λ¦¬μ†μ¤ λ””λ ‰ν† λ¦¬
    - μ„λ²„κ°€ λ¦¬μ†μ¤μ URIλ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬
    - ex) `/members`
- μ¤ν† μ–΄ (store)
    - ν΄λΌμ΄μ–ΈνΈκ°€ κ΄€λ¦¬ν•λ” μμ› μ €μ¥μ†
    - ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤μ URIλ¥Ό μ•κ³  κ΄€λ¦¬
    - ex) `/files`
- μ»¨νΈλ΅¤λ¬(controller), μ»¨νΈλ΅¤ URI
    - λ¬Έμ„, μ»¬λ ‰μ…, μ¤ν† μ–΄λ΅ ν•΄κ²°ν•κΈ° μ–΄λ ¤μ΄ μ¶”κ°€ ν”„λ΅μ„Έμ¤ μ‹¤ν–‰
    - λ™μ‚¬λ¥Ό μ§μ ‘ μ‚¬μ©
    - ex) `/members/{id}/delete`