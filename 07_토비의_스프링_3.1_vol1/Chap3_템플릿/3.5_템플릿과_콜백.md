# 3.5 í…œí”Œë¦¿ê³¼ ì½œë°±

ì „ëµ íŒ¨í„´ì€ ë³µì¡í•˜ì§€ë§Œ ë°”ë€Œì§€ ì•ŠëŠ” ì¼ì •í•œ íŒ¨í„´ì„ ê°–ëŠ” ì‘ì—… íë¦„ì´ ì¡´ì¬í•˜ê³  ê·¸ì¤‘ ì¼ë¶€ë¶„ë§Œ ìì£¼ ë°”ê¿”ì„œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°ì— ì í•©í•œ êµ¬ì¡°ì„

- í…œí”Œë¦¿ : ì „ëµ íŒ¨í„´ì˜ ì»¨í…ìŠ¤íŠ¸
- ì½œë°± : ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´ì§€ëŠ” ì˜¤ë¸Œì íŠ¸

>ğŸ’¡ **í…œí”Œë¦¿ (Template)**
>- ì–´ë–¤ ëª©ì ì„ ìœ„í•´ ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘” ëª¨ì–‘ì´ ìˆëŠ” í‹€
>- ex. JSPëŠ” HTMLì´ë¼ëŠ” ê³ ì •ëœ ë¶€ë¶„ì— ELê³¼ ìŠ¤í¬ë¦½ë¦¿ì´ë¼ëŠ” ë³€í•˜ëŠ” ë¶€ë¶„ì„ ë„£ì€ ì¼ì¢…ì˜ í…œí”Œë¦¿ íŒŒì¼
>- í…œí”Œë¦¿ ë©”ì†Œë“œ íŒ¨í„´ì€ ê³ ì •ëœ í‹€ì˜ ë¡œì§ì„ ê°€ì§„ í…œí”Œë¦¿ ë©”ì†Œë“œë¥¼ ìŠˆí¼í´ë˜ìŠ¤ì— ë‘ê³ , ë°”ë€ŒëŠ” ë¶€ë¶„ì„ ì„œë¸Œí´ë˜ìŠ¤ì˜ ë©”ì†Œë“œì— ë‘ëŠ” êµ¬ì¡°ë¡œ ì´ë£¨ì–´ì§



>ğŸ’¡ **ì½œë°± (callback)**
>- ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ëª©ì ìœ¼ë¡œ ë‹¤ë¥¸ ì˜¤ë¸Œì íŠ¸ì˜ ë©”ì†Œë“œì— ì „ë‹¬ë˜ëŠ” ì˜¤ë¸Œì íŠ¸ë¥¼ ë§í•¨
>- íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë˜ì§€ë§Œ ê°’ì„ ì°¸ì¡°í•˜ê¸° ìœ„í•œ ê²ƒì´ ì•„ë‹ˆë¼ íŠ¹ì • ë¡œì§ì„ ë‹´ì€ ë©”ì†Œë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ ì‚¬ìš©ë¨
>- ìë°”ì—ì„œëŠ” ë©”ì†Œë“œ ìì²´ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•  ë°©ë²•ì´ ì—†ê¸°ì— ë©”ì†Œë“œê°€ ë‹´ê¸´ ì˜¤ë¸Œì íŠ¸ë¥¼ ì „ë‹¬í•´ì•¼í•¨ (functional object)
>- [https://jojoldu.tistory.com/232](https://jojoldu.tistory.com/232)


## 3.5.1 í…œí”Œë¦¿/ì½œë°±ì˜ ë™ì‘ì›ë¦¬

- ì „ëµ íŒ¨í„´ê³¼ ë‹¬ë¦¬, í…œí”Œë¦¿/ì½œë°± íŒ¨í„´ì˜ ì½œë°±ì€ ë³´í†µ ë‹¨ì¼ ë©”ì†Œë“œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•¨
- í•˜ë‚˜ì˜ í…œí”Œë¦¿ì—ì„œ ì—¬ëŸ¬ ê°€ì§€ ì¢…ë¥˜ì˜ ì „ëµì„ ì‚¬ìš©í•´ì•¼í•œë‹¤ë©´ í•˜ë‚˜ ì´ìƒì˜ ì½œë°± ì˜¤ë¸Œì íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŒ
- ì½œë°±ì€ ì¼ë°˜ì ìœ¼ë¡œ í•˜ë‚˜ì˜ ë©”ì†Œë“œë¥¼ ê°€ì§„ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´ì§

![Untitled](../img/Chap3/Untitled.png)

- *í´ë¼ì´ì–¸íŠ¸*
    - í…œí”Œë¦¿ ì•ˆì—ì„œ ì‹¤í–‰ë  ë¡œì§ì„ ë‹´ì€ ì½œë°± ì˜¤ë¸Œì íŠ¸ ìƒì„± ë° ì½œë°±ì´ ì°¸ì¡°í•  ì •ë³´ ì œê³µ
- *í…œí”Œë¦¿*
    - ì •í•´ì§„ ì‘ì—… íë¦„ì— ë”°ë¼ ì‘ì—…í•˜ë‹¤ê°€ ë‚´ë¶€ì—ì„œ ìƒì„±í•œ ì°¸ì¡°ì •ë³´ë¥¼ ê°€ì§€ê³  ì½œë°± ì˜¤ë¸Œì íŠ¸ì˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œ
    - í›„ì— ì½œë°±ì´ ëŒë ¤ì¤€ ì •ë³´ë¥¼ ì‚¬ìš©í•´ì„œ ì‘ì—…ì„ ë§ˆì € ìˆ˜í–‰í•¨
- *ì½œë°±*
    - í´ë¼ì´ì–¸íŠ¸ ë©”ì†Œë“œì— ìˆëŠ” ì •ë³´ì™€ í…œí”Œë¦¿ì´ ì œê³µí•œ ì°¸ì¡°ì •ë³´ë¥¼ ì´ìš©í•´ì„œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ ë‹¤ì‹œ í…œí”Œë¦¿ì— ëŒë ¤ì¤Œ

**â‡’ DI ë°©ì‹ì˜ ì „ëµ íŒ¨í„´ êµ¬ì¡°**

**â‡’ ë©”ì†Œë“œ ë ˆë²¨ì—ì„œì˜ DI**

íŠ¹ì§•

- ë§¤ë²ˆ ë©”ì†Œë“œ ë‹¨ìœ„ë¡œ ì‚¬ìš©í•  ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒˆë¡­ê²Œ ì „ë‹¬ë°›ëŠ”ë‹¤ëŠ” ê²ƒì´ íŠ¹ì§•
- ì½œë°± ì˜¤ë¸Œì íŠ¸ê°€ ë‚´ë¶€ í´ë˜ìŠ¤ë¡œì„œ ìì‹ ì´ ìƒì„±í•œ í´ë¼ì´ì–¸íŠ¸ ë©”ì†Œë“œ ë‚´ì˜ ì •ë³´ë¥¼ ì§ì ‘ ì°¸ì¡°í•¨
- í´ë¼ì´ì–¸íŠ¸ì™€ ì½œë°±ì´ ê°•í•˜ê²Œ ê²°í•¨ë¨

### JdbcContextì— ì ìš©ëœ í…œí”Œë¦¿/ì½œë°±

![Untitled](../img/Chap3/Untitled%201.png)

- í…œí”Œë¦¿ì˜ ì‘ì—… íë¦„ì´ ì¢€ ë” ë³µì¡í•œ ê²½ìš°ì—ëŠ” í•œ ë²ˆ ì´ìƒ ì½œë°±ì„ í˜¸ì¶œí•˜ê¸°ë„ í•˜ê³  ì—¬ëŸ¬ ê°œì˜ ì½œë°±ì„ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë°›ì•„ì„œ ì‚¬ìš©í•˜ê¸°ë„ í•¨

## 3.5.2 í¸ë¦¬í•œ ì½œë°±ì˜ ì¬í™œìš©

- í´ë¼ì´ì–¸íŠ¸ì˜ ë©”ì†Œë“œê°€ ê°„ê²°í•´ì§€ê³  ìµœì†Œí•œì˜ ë°ì´í„° ì•¡ì„¸ìŠ¤ ë¡œì§ë§Œ ê°–ê³ ìˆê²Œ ë¨
- DAOë©”ì†Œë“œì—ì„œ ë§¤ë²ˆ ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ìƒëŒ€ì ìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  ì½ê¸°ê°€ ë¶ˆí¸í•¨

### ì½œë°±ì˜ ë¶„ë¦¬ì™€ ì¬í™œìš©

- ë³µì¡í•œ ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ì˜ ì‚¬ìš©ì„ ìµœì†Œí™”í•´ë³´ì!
    - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì½”ë“œë¥¼ ì°¾ì•„ ë¶„ë¦¬í•¨

```java
public void deleteAll() throws SQLException {
	jdbcContextWithStatementStrategy(
		// ë³€í•˜ì§€ ì•ŠëŠ” ì½œë°± í´ë˜ìŠ¤ ì •ì˜ì™€ ì˜¤ë¸Œì íŠ¸ ìƒì„±
		new StatementStrategy() {
			public PreparedStatement makePreparedStatment(Connection c) throws SQLException {
				return c.preparedStatement("delete from users"); // ë³€í•˜ëŠ” SQL ë¬¸ì¥
			}
		}
	);
}
```

â†’ ìœ ì‚¬í•œ ë‚´ìš©ì˜ ì½œë°± ì˜¤ë¸Œì íŠ¸ê°€ ë°˜ë³µë  ê°€ëŠ¥ì„±ì´ ë†’ìŒ

```java
public void deleteAll() throws SQLException {
	executeSql("delete from users"); // ë³€í•˜ëŠ” SQL ë¬¸ì¥
}
```

```java
private void executeSql(final String query) throws SQLException {
	this.jdbcContext.workWithStatementStrategy(
		// ë³€í•˜ì§€ ì•ŠëŠ” ì½œë°± í´ë˜ìŠ¤ ì •ì˜ì™€ ì˜¤ë¸Œì íŠ¸ ìƒì„±
		new StatementStrategy() {
			public PreparedStatement makePreparedStatment(Connection c) throws SQLException {
				return c.preparedStatement(query);
			}
		}
	);
}
```

â†’ SQLì„ ë‹´ì€ íŒŒë¼ë¯¸í„°ë¥¼ finalë¡œ ì„ ì–¸í•´ì„œ ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ì¸ ì½œë°± ì•ˆì—ì„œ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê²ƒë§Œ ì£¼ì˜í•˜ë©´ë¨

â†’ ë³µì¡í•œ ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ì¸ ì½œë°±ì„ ì§ì ‘ ë§Œë“¤ í•„ìš”ë„ ì—†ìŒ

### ì½œë°±ê³¼ í…œí”Œë¦¿ì˜ ê²°í•©

- í…œí”Œë¦¿ì€ `JdbcContext` í´ë˜ìŠ¤ê°€ ì•„ë‹ˆë¼ `workWithStatementStrategy()` ë©”ì†Œë“œì´ë¯€ë¡œ `JdbcContext` í´ë˜ìŠ¤ë¡œ ì½œë°± ìƒì„±ê³¼ í…œí”Œë¦¿ í˜¸ì¶œì´ ë‹´ê¸´ `executeSql()`ë©”ì†Œë“œë¥¼ ì˜®ê¸´ë‹¤í•´ë„ ë¬¸ì œë˜ì§€ ì•ŠìŒ

```java
public class JdbcContext {
	//...//
	public void executeSql(final String query) throws SQLException {
		workWithStatementStrategy(
			new StatementStrategy() {
				public PreparedStatement makePreparedStatment(Connection c) throws SQLException {
					return c.preparedStatement(query);
				}
			}
		);
	}
```

```java
public void deleteAll() throws SQLException {
	this.jdbcContext.executeSql("delete from users");
}
```

![Untitled](../img/Chap3/Untitled%202.png)

- í•˜ë‚˜ì˜ ëª©ì ì„ ìœ„í•´ ì„œë¡œ ê¸´ë°€í•˜ê²Œ ì—°ê´€ë˜ì–´ ë™ì‘í•˜ëŠ” ì‘ì§‘ë ¥ì´ ê°•í•œ ì½”ë“œë“¤ì´ê¸° ë•Œë¬¸ì— í•œ êµ°ë° ëª¨ì—¬ ìˆëŠ”ê²Œ ìœ ë¦¬í•¨
- ë” ë³µì¡í•œ sqlë¬¸ì¥ì—ë„ ì ìš© ê°€ëŠ¥í•œë°, ë°”ì¸ë”© íŒŒë¼ë¯¸í„°ì˜ ê°œìˆ˜ëŠ” ì¼ì •í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ìë°” 5ì—ì„œ ì¶”ê°€ëœ ê°€ë³€ì¸ì(varags)ë¡œ ì •ì˜í•´ë‘ëŠ” ê²ƒì´ ì¢‹ìŒ

## 3.5.3 í…œí”Œë¦¿/ì½œë°±ì˜ ì‘ìš©

- ê¸°ë³¸ì ìœ¼ë¡œ OCPë¥¼ ì§€í‚¤ê³ , ì „ëµ íŒ¨í„´ê³¼ DIë¥¼ ë°”íƒ•ì— ê¹”ê³  ìˆìœ¼ë‹ˆ ì›í•œë‹¤ë©´ ì–¸ì œë“ ì§€ í™•ì¥í•´ì„œ í¸ë¦¬í•œ ë°©ë²•ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥í•¨
- ì¤‘ë³µë˜ëŠ” ì½”ë“œê°€ ìˆë‹¤ë©´?!
    - ë©”ì†Œë“œë¡œ ë¶„ë¦¬
    - ì¼ë¶€ ì‘ì—…ì„ í•„ìš”ì— ë”°ë¼ ë°”ê¾¼ë‹¤ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ì´ì— ë‘ê³  ë¶„ë¦¬
    - ì „ëµ íŒ¨í„´ ì ìš©
    - DIë¡œ ì˜ì¡´ê´€ê³„ ê´€ë¦¬
    - ë°”ë€ŒëŠ” ë¶€ë¶„ì´ í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì•ˆì— ë™ì‹œì— ì—¬ëŸ¬ ì¢…ë¥˜ê°€ ë§Œë“¤ì–´ì§ˆ ìˆ˜ ìˆë‹¤ë©´ í…œí”Œë¦¿/ì½œë°± íŒ¨í„´ ì ìš© ê³ ë ¤

### í…ŒìŠ¤íŠ¸ì™€ try/catch/finally

íŒŒì¼ì„ í•˜ë‚˜ ì—´ì–´ì„œ ëª¨ë“  ë¼ì¸ì˜ ìˆ«ìë¥¼ ë”í•œ í•©ì„ ëŒë ¤ì£¼ëŠ” ì½”ë“œ

```java
public class CalcSumTest {
	@Test
	public void sumOfNumbers() throws IOException {
		Calculatorr calculator = new Calculator();
		int sum = calculator.calcSum(getClass().getResource("numbers.txt").getPath());
		assertThat(sum, is(10));
	}
}
```

```java
public class Calculator {
	public Integer calcSum(String filepath) throws IOException {
		BufferedReader br = null;
		try {
			br = new BufferedReader(new FileReader(filepath));
			Integer sum = 0;
			String line = null;
			while ((line = br.readLine()) != null) {
				sum += Integer.valueOf(line);
			}
			return sum;
		} catch (IOException e) {
				System.out.println(e.getMessage());
				throw e;
		} finally {
				if (br != null) {
					try { br.close(); }
					catch(IOException e) { System.out.println(e.getMessage()); }
				}
		}	
	}
}
```

### ì¤‘ë³µì˜ ì œê±°ì™€ í…œí”Œë¦¿/ì½œë°± ì„¤ê³„

ìˆ«ìì˜ ê³±ì„ ê³„ì‚°í•˜ëŠ” ê¸°ëŠ¥ ì¶”ê°€

```java
public interface BufferedReaderCallback {
	Integer doSomethingWithReader(BufferedReader br) throws IOException;
}
```

```java
public Integer fileReadTemplate(Stirng filepath, BufferedReaderCallback callback) throws IOException {
	BufferedReader br = null;
	try {
		br = new BufferedReader(new FileReader(filepath));

		// ì½œë°± ì˜¤ë¸Œì íŠ¸ í˜¸ì¶œ
		// í…œí”Œë¦¿ì—ì„œ ë§Œë“  ì»¨í…ìŠ¤íŠ¸ ì •ë³´ì¸ BufferedReaderë¥¼ ì „ë‹¬í•´ì£¼ê³  ì½œë°±ì˜ ì‘ì—… ê²°ê³¼ë¥¼ ë°›ì•„ë‘ 
		int ret = callback.doSomethingWithReader(br); 

		return ret;
	} catch (IOException e) {
			System.out.println(e.getMessage);
			throw e;
	} finally {
			if (br != null) {
				try { br.close(); }
				catch(IOException e) { System.out.println(e.getMssage()); }
			}
	}
}
	
```

í…œí”Œë¦¿ìœ¼ë¡œ ë¶„ë¦¬í•œ ë¶€ë¶„ì„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ì½”ë“œë¥¼ `BufferedReaderCallback` ì¸í„°í˜ì´ìŠ¤ë¡œ ë§Œë“  ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ì— ë‹´ëŠ”ë‹¤

```java
public Integer calcSum(String filepath) throws IOException {
	BufferedReaderCallback sumCallback = new BufferedReaderCallback() {
		public Integer doSomethingWithReader(BufferedReader br) throws IOException {
			Integer sum = 0;
			String line = null;
			while ((line = br.readLine()) != null) {
				sum += Integer.valueOf(line);
			}
			return sum;
		}
	};
	return fileReadTemplate(filepath, sumCallback);
}
```

í…ŒìŠ¤íŠ¸ ì‘ì„±

```java
public class CalcSumTest {
	Calculator calculator;
	String numFilepath;

	@Before public void setUp() {
		this.calculator = new Calculator();
		this.numFilepath = getClass().getResource("numbers.txt").getPath();
	}

	@Test public void sumOfNumbers() throws IOException {
		assertThat(calculator.calcSum(this.numFilepath), is(10));
	}

	@Test public void multiplyOfNumbers() throws IOException {
		assertThat(calculator.calcMultiply(this.numFilepath), is(24));
	}
}
```

```java
public Integer calcMultiply(String filepath) throws IOException {
	BufferedReaderCallback multiplyCallback = new BufferedReaderCallback() {
		public Integer doSomethingWithReader(BufferedReader br) throws IOException {
			Integer multiply = 1;
			String line = null;
			while ((line = br.readLine()) != null) {
				multiply *= Integer.valueOf(line);
			}
			return multiply;
		}
	};
	return fileReadTemplate(filepath, multiplyCallback);
}
```

### í…œí”Œë¦¿/ì½œë°±ì˜ ì¬ì„¤ê³„

- `calcSum()`ê³¼ `calMultiply()`ì— ë‚˜ì˜¤ëŠ” ë‘ ê°œì˜ ì½œë°±ì´ ìœ ì‚¬í•¨
- í…œí”Œë¦¿ê³¼ ì½œë°±ì„ ì°¾ì•„ë‚¼ ë•ŒëŠ”, ë³€í•˜ëŠ” ì½”ë“œì˜ ê²½ê³„ë¥¼ ì°¾ê³  ê·¸ ê²½ê³„ë¥¼ ì‚¬ì´ì— ë‘ê³  ì£¼ê³ ë°›ëŠ” ì¼ì •í•œ ì •ë³´ê°€ ìˆëŠ”ì§€ í™•ì¸

```java
public interface LineCallback{
	Integer doSomethingWithLine(String line, Integer value);
}
```

```java
public Integer lineReadTemplate(String filepath, LineCallback callback, int initVal) // ê³„ì‚° ê²°ê³¼ë¥¼ ì €ì¥í•  ë³€ìˆ˜ì˜ ì´ˆê¸°ê°’
		throws IOException {
	BufferedReader br = null;
	try {
		br = new BufferedReader(new FileReader(filepath));
		Integer res = initVal;
		String line = null;
		while((line = br.readLine() != null) { // íŒŒì¼ì˜ ê° ë¼ì¸ì„ ë£¨í”„ë¥¼ ëŒë©´ì„œ ê°€ì ¸ì˜¤ëŠ” ê²ƒë„ í…œí”Œë¦¿ì´ ë‹´ë‹¹í•¨
			res // ì½œë°±ì´ ê³„ì‚°í•œ ê°’ì„ ì €ì¥í•´ë’€ë‹¤ê°€ ë‹¤ìŒ ë¼ì¸ ê³„ì‚°ì— ë‹¤ì‹œ ì‚¬ìš©í•¨ 
				= callback.doSomethingWithLine(line, res); // ê° ë¼ì¸ì˜ ë‚´ìš©ì„ ê°€ì§€ê³  ê³„ì‚°í•˜ëŠ” ì‘ì—…ë§Œ ì½œë°±ì— ë§¡ê¹€
		}
	} catch (IOException e) {
		...
	} finally {
		...
	}
}
```

```java
public Integer calcSum(String filepath) throws IOException {
	LineCallback **sumCallback** = new LineCallback() { // ìµëª… í•¨ìˆ˜
		public Integer doSomethingWithLine(String line, Integer value) {
			**return value + Integer.valueOf(line);**
		}
	};
	return lineReadTemplate(filepath, **sumCallback**, 0);
}

public Integer calcMultiply(String filepath) throws IOException {
	LineCallback **multiplyCallback** = new LineCallback() {
		public Integer doSomethingWithLine(String line, Integer value) {
			**return value * Integer.valueOf(line);**
		}
	};
	return lineReadTemplate(filepath, **multiplyCallback**, 1);
}
```

â†’ ë¡œìš° ë ˆë²¨ íŒŒì¼ ì²˜ë¦¬ ì½”ë“œê°€ í…œí”Œë¦¿ìœ¼ë¡œ ë¶„ë¦¬ë˜ê³  ìˆœìˆ˜í•œ ê³„ì‚° ë¡œì§ë§Œ ë‚¨ì•„ìˆìŒ

### ì œë„¤ë¦­ìŠ¤ë¥¼ ì´ìš©í•œ ì½œë°± ì¸í„°í˜ì´ìŠ¤

- ê²°ê³¼ íƒ€ì…ì„ ë‹¤ì–‘í•˜ê²Œ ê°€ì ¸ê°€ê³ ì‹¶ë‹¤ë©´ ìë°” ì–¸ì–´ì— íƒ€ì… íŒŒë¼ë¯¸í„° ê°œë…ì„ ë„ì…í•œ ì œë„¤ë¦­ìŠ¤ë¥¼ ì´ìš©í•˜ë©´ ë¨

```java
public interface LineCallback<T> {
	T doSomethingWithLine(String line, T value);
}
```

```java
public T lineReadTemplate(String filepath, LineCallback<T> callback, T initVal) throws IOException {
	BufferedReader br = null;
	try {
		br = new BufferedReader(new FileReader(filepath));
		T res = initVal;
		String line = null;
		while((line = br.readLine() != null) {
			res = callback.doSomethingWithLine(line, res);
		}
	} catch (IOException e) {
		...
	} finally {
		...
	}
}
```

íŒŒì¼ì˜ ëª¨ë“  ë¼ì¸ì˜ ë‚´ìš©ì„ í•˜ë‚˜ì˜ ë¬¸ìì—´ë¡œ ê¸¸ê²Œ ì—°ê²°í•˜ëŠ” ë©”ì†Œë“œ ì¶”ê°€

```java
public String concatenate(String filepath) throws IOException {
	LineCallback<String> concatenateCallback = new LineCallback()<String> {
		public String doSomethingWithLine(String line, String value) {
			return value + line;
		}
	};
	return lineReadTemplate(filepath, concatenateCallback, ""); // í…œí”Œë¦¿ ë©”ì†Œë“œì˜ TëŠ” ëª¨ë‘ ìŠ¤íŠ¸ë§ì´ ë¨
}
```

```java
@Test
public void concatenateStrings() throws IOException {
	assertThat(calculator.concatenate(this.numFilepath), is("1234"));
}
```

- ìŠ¤í”„ë§ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì€ í…œí”Œë¦¿/ì½œë°± íŒ¨í„´ì´ ì¢…ì¢… ì ìš©ë˜ì–´ìˆìŒ
    - ë¦¬í„´ ê°’ì„ ê°–ëŠ” í…œí”Œë¦¿
    - í…œí”Œë¦¿ ë‚´ì—ì„œ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œë˜ëŠ” ì½œë°± ì˜¤ë¸Œì íŠ¸
    - ì œë„¤ë¦­ìŠ¤ íƒ€ì…ì„ ê°–ëŠ” ë©”ì†Œë“œë‚˜ ì½œë°± ì¸í„°í˜ì´ìŠ¤
